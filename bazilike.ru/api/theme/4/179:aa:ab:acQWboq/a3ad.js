flexbe_cli.entity.setClientJs("element","social01",{isPure:!0});flexbe_cli.entity.setClientJs("element","text01",{isPure:!0});function G(e,t){t=t.sort((s,a)=>a-s);let i=t[0];return t.forEach(s=>{e<i&&e<=s&&(i=s)}),i}var Q=150,F=2160,J={avif:null,webp:null};function X(){let e=typeof flexbe_cli=="object"&&flexbe_cli.vars?.site.images||{};return{lazy:!0,lazy_priority:!1,avif:!1,webp:!1,avif_support:J.avif||e.avif_support,webp_support:J.webp||e.webp_support,slow_network:!1,maxSize:F,minSize:Q,quality_map:{jpg:70,webp:70,avif:55}}}async function P(e){return new Promise((t,i)=>{let s=new Image,a=()=>{t(s),setTimeout(()=>{typeof s.remove=="function"&&s.remove()},10)};"decode"in s&&!/\.svg/.test(e)?(s.src=e,s.decode().then(a).catch(i)):(s.onerror=i,s.onload=a,s.src=e)})}function fe(e){if(typeof e!="string")return e;e=e.replace(/(\/img\/[\d_q]+)\/[\w-]+(\.\w{3,4})/i,"$1$2");let[,t,i,s,a]=e.match(/\/img\/(\d+)_?(\d+)?_?q?(\d+)?\.(\w{3,4})/i)||[];return{id:+t,ext:a,name:`${t}.${a}`,size:i?+i:0,quality:s?+s:null}}function K(e,t){let i=t.avif_support,s=t.webp_support,a=t.avif,o=t.webp,n=e.ext;return i&&a?n="avif":s&&o?n="webp":e.ext==="webp"&&(s?n="webp":n=e.transparent?"png":"jpg"),n}function me(e,t=null,i=null){i={...X(),...i};let{id:s,ext:a}=e;if(!s)return"";let o=i.maxSize||F;!t&&e.ext==="webp"&&!i.webp_support&&(t=Math.min(e.width||o,o));let n=e.animated??a==="gif",r=`/img/${s}.${a}`;if(!t||n||a==="svg")return r;let h=K(e,i),l=i.slow_network&&Z(),d=i.quality_map;switch(l&&(d={jpg:50,webp:50,avif:45}),h){case"png":return`/img/${s}_${t}.png`;case"avif":case"webp":case"jpg":return`/img/${s}_${t}_q${d[h]}.${h}`;case"gif":break;default:return r}}function ue(e){let t=String(e).match(/\.(jpg|jpeg|png|gif|svg|bmp|webp)$/i);return t?.[1]?t[1]:""}function ge(e){return e!=="transparent"?e:"#000000"}function we(e){if(typeof e=="string"&&(e=fe(e)),!e||typeof e!="object")return{};let t=e.img_ext||e.ext,i=e.img_id||e.id,s=e.img_name||e.name;(!t||t==="false")&&(t=s?ue(s):"jpg");let a=e.img_border||e.border,o=ge(e.img_average||e.average),n=e.img_preview||e.preview||"",r=e.img_width||e.width||0,h=e.img_height||e.height||0,l=+(+e.img_proportion||+e.proportion||0).toFixed(2),d=e.img_animated||e.animated||t==="gif",p=e.img_transparent||e.transparent||0;return{id:i,ext:t,average:o,preview:n,width:r,height:h,proportion:l,border:a,animated:d,transparent:p}}function y(e,t=0,i){return me(we(e),typeof t=="number"?Math.round(t):typeof t=="string"?parseInt(t,10):null,i)}async function W(e){let t=e,i=typeof e=="object"&&(+e.proportion||+e.img_proportion)||0;if(i&&(i<2||i<5&&i%1>0)&&(i*=100),typeof t=="string"||!i){typeof t=="object"&&(t=y(e,50));let s=await P(t);i=s.naturalHeight/s.naturalWidth*100}return i}function Z(){return typeof navigator>"u"?!1:(navigator.connection?.effectiveType||"4g")!=="4g"}async function b(e,t,i){i={...X(),...i};let s=e.width||0,a=e.img_scale||e.scale||"cover",o=e.img_type||e.type||"background",n=t.height/t.width,r=await W(e)/100,h=i.slow_network&&Z()?Math.min(1.5,globalThis.devicePixelRatio):Math.min(2,globalThis.devicePixelRatio),l=K(e,i),d,p;o==="image"||n>r&&a==="contain"||n<r&&a==="cover"?(d=t.width,p=d*r):(p=t.height,d=p/r),h>1&&(d*=h,p*=h),i.sizes&&(d=G(d,i.sizes),p=d*r);let w=i.minSize||Q,u=i.maxSize||F;return d<=w&&/webp|jpg/.test(l)&&(d=d/h*2,p=d*r),s&&d>s&&(d=s,p=d*r),d>u&&(d=u,p=d*r),{width:Math.ceil(d),height:Math.ceil(p)}}var B=new WeakMap,ye=()=>Math.floor(Math.random()*999999999),ee=e=>{let{is:t,component:i}=e;return B.has(i)||B.set(i,ye()),`.component-${t}-${B.get(i)}`},m=class{static is="";require=[];core=null;owner=null;root=null;component=null;$component=null;componentWidth=null;componentHeight=null;isInited=!1;isLoaded=!1;isUpdated=!1;isOpen=null;isVisible=null;inScreen=!1;inBeside=!1;inView=!1;inFocus=!1;wasVisible=null;wasScreen=!1;wasBeside=!1;wasView=!1;wasFocus=!1;get is(){return this.constructor.is}constructor({component:e,core:t,reason:i}){this.core=t,this.owner=t.area,this.root=t.root,this.component=e,this.$component=$(e),this.isUpdated=i==="update"}onInit(){}onLoad(){}onVisible(e){}onScreen(e){}onBeside(e){}onView(e){}onFocus(e){}onResize(e){}onOpen(e){}onClose(e){}onHideShowUI(e){}onDestroy(){}#t(){this._clearEvents();let e=ee(this);$(this.owner).on(`tween${e}`,t=>this.#e(t.detail)),$(this.root).on(`open${e}`,t=>this._onOpen(t.detail)),$(this.root).on(`close${e}`,t=>this._onClose(t.detail))}_clearEvents(){let e=ee(this);$(this.owner).off(e),$(this.root).off(e)}#e({force:e=!1}={}){let t=this.componentWidth==null||this.componentHeight==null,i=this.core.isVisible,s=i&&this.component.offsetWidth||0,a=i&&this.component.offsetHeight||0,o=!!(s||a),n=o&&this.core.inBeside,r=o&&this.core.inScreen,h=o&&this.core.inView,l=o&&this.core.inFocus,d=this.componentWidth!==s,p=this.componentHeight!==a,w=e||o&&!t&&(d||p);o&&(this.componentWidth=s,this.componentHeight=a),o!==this.isVisible&&this._onVisible({state:o}),w&&this._onResize({force:e}),n!==this.inBeside&&this._onBeside({state:n}),r!==this.inScreen&&this._onScreen({state:r}),h!==this.inView&&this._onView({state:h}),l!==this.inFocus&&this._onFocus({state:l})}_onInit(){this.isInited=!0,typeof this.onInit=="function"&&this.onInit(),this.#e(),this.#t(),flexbe_cli.require(this.require,()=>this._onLoad())}_onLoad(){this.isLoaded=!0,typeof this.onLoad=="function"&&this.onLoad(),this.require.length&&this.#e()}_onVisible({state:e}){if(this.isVisible==null){this.isVisible=e,this.wasVisible=e;return}let t=e&&!this.wasVisible;this.isVisible=e,this.onVisible({state:e,first:t}),e&&(this.wasVisible=!0)}_onScreen({state:e}){let t=e&&!this.wasScreen;this.inScreen=e,this.onScreen({state:e,first:t}),e&&(this.wasScreen=!0)}_onView({state:e}){let t=e&&!this.wasView;this.inView=e,this.onView({state:e,first:t}),e&&(this.wasView=!0)}_onBeside({state:e}){let t=e&&!this.wasBeside;this.inBeside=e,this.onBeside({state:e,first:t}),e&&(this.wasBeside=!0)}_onFocus({state:e}){let t=e&&!this.wasFocus;this.inFocus=e,this.onFocus({state:e,first:t}),e&&(this.wasFocus=!0)}_onResize(e){this.onResize(e)}_onOpen(e){this.isOpen=!0,this.#e(),this.onOpen(e)}_onClose(e){this.isOpen=!1,this.#e(),this.onClose(e)}_onWindowResize(){this.onWindowResize&&(this.#e(),this.onWindowResize())}_onHideShowUI(e){this.onHideShowUI(e)}destroy(){this._clearEvents(),this.onDestroy()}};var Oe=Object.freeze({value:"fill",title:"FILL",auto:!0,selectValue:"fill"}),qe=Object.freeze({value:"auto",title:"AUTO",auto:!0,selectValue:"auto"}),Fe=Object.freeze({value:"auto",title:"HUG",auto:!0,selectValue:"auto"}),We=Object.freeze({value:"px",title:"PX",step:1,altStep:5}),Be=Object.freeze({value:"pt",title:"PT",step:1,altStep:.1}),Ue=Object.freeze({value:"em",title:"EM",step:.1,altStep:.01}),Ne=Object.freeze({value:"rem",title:"REM",step:.1,altStep:.01}),De=Object.freeze({value:"vh",title:"VH",step:1,altStep:.1,tip:typeof tr=="function"&&tr("editor::units::vh_tip")}),je=Object.freeze({value:"vw",title:"VW",step:1,altStep:.1,tip:typeof tr=="function"&&tr("editor::units::vw_tip")}),Ye=Object.freeze({value:"cqw",title:"CQW",step:1,altStep:.1}),Ge=Object.freeze({value:"cqw",title:"CQH",step:1,altStep:.1}),Je=Object.freeze({value:"ch",title:"CH",step:1,altStep:5,tip:typeof tr=="function"&&tr("editor::units::ch_tip")}),Qe=Object.freeze({value:"%",title:"%",step:1,altStep:.1});function te(e,t,i=1){let s=e.getBoundingClientRect();return{x:(t.clientX-s.left)/i,y:(t.clientY-s.top)/i}}var V=class extends m{static is="backgroundElement";constructor(...e){super(...e),this.$glareElement=this.$component.find("> .bg-glare-hover").eq(0),this.$bgElement=this.$component.find(".bg-fill").eq(0),this.$hoverElement=this.$component.find(".bg-fill-hover").eq(0),this.lazy=this.$bgElement.data("img-lazy"),this.isImgLoaded=this.$bgElement.data("img-loaded"),this.bgType=this.$bgElement.data("type"),this.hoverType=this.$hoverElement.data("hover-type"),this.hasImagePlaceholder=!!this.$bgElement.data("img-has-placeholder"),this.imageLoadingOptions=flexbe_cli.vars.site.images}async onInit(){this.$bgElement.on("setImage",async()=>{this.isVisible&&!this.isImgLoading&&!this.isImgLoaded&&(this.setImageParams(),await this.loadImage())}),this.$glareElement.length&&this.$component.off("mousemove.bg-glare").on("mousemove.bg-glare",e=>{let{x:t,y:i}=te(this.$component[0],e);this.$glareElement.css({"--bgGlareX":`${t}px`,"--bgGlareY":`${i}px`})})}async onBeside({state:e,first:t}){e&&t&&(this.lazy&&this.bgType==="image"&&!this.isImgLoaded&&(this.setImageParams(),await this.loadImage()),this.hoverType==="image"&&(this.setHoverImageParams(),await this.loadHoverImage()),this.dispatchEffects())}onWindowResize(){this.dispatchEffects()}getComponentSize(){return{width:this.componentWidth,height:this.componentHeight}}dispatchEffects(){let e=flexbe_cli.resize.responsiveMode==="mobile",t=this.$component.hasClass("hover-trigger"),i=this.$component.hasClass("hover-trigger-am"),s=e?i:t;this.$component.toggleClass("js-hover",s)}async loadImage(){this.isImgLoading=!0;let e=0;if(!this.image.original){let{width:i}=await b(this.image,this.getComponentSize(),this.imageLoadingOptions);e=i}let t=y(this.image,e,this.imageLoadingOptions);this.hasImagePlaceholder&&await P(t),this.setImage(this.$bgElement,t),this.isImgLoading=!1,this.isImgLoaded=!0}async loadHoverImage(){let e=0;if(!this.hoverImage.original){let{width:i}=await b(this.hoverImage,this.getComponentSize(),this.imageLoadingOptions);e=i}let t=y(this.hoverImage,e,this.imageLoadingOptions);this.setImage(this.$hoverElement,t)}setImage(e,t){e.css("background-image",`url(${t})`),this.$component.find(".bg-preview").eq(0).addClass("invisible")}setImageParams(){let{$bgElement:e}=this;this.image={id:e.data("img-id"),ext:e.data("img-ext"),width:e.data("img-width"),animated:e.data("img-animated"),transparent:e.data("img-transparent"),proportion:e.data("img-proportion"),original:e.is("[data-img-original]"),type:"background",scale:"cover"}}setHoverImageParams(){let{$hoverElement:e}=this;this.hoverImage={id:e.data("img-id"),ext:e.data("img-ext"),width:e.data("img-width"),animated:e.data("img-animated"),transparent:e.data("img-transparent"),proportion:e.data("img-proportion"),original:e.is("[data-img-original]"),type:"background",scale:"cover"}}};flexbe_cli.entity.setClientJs("element","zone",{components:[V],onInit(){this.setMeta()},onUpdate(){this.setMeta()},setMeta(){let e=this.lastViewport,t=this.hideHidden;this.lastViewport=flexbe_cli.resize.viewportWidth,this.hideHidden=flexbe_cli.is_admin&&$("body").hasClass("hide-hidden"),this.needFixOrder=this.needFixOrder||this.lastViewport!==e||this.hideHidden!==t},onResize(){this.inScreen&&this.isVisible&&this.fixElementOrder()},fixElementOrder(){if(this.setMeta(),!this.needFixOrder)return;this.needFixOrder=!1;let e=this.$area.find(".elements-list");e.find("[data-hidden]").length&&e.each((t,i)=>{let s=$(i).find(".element-item--static"),a=s.filter(":visible");s.removeClass("is-first-child is-last-child"),a.first().addClass("is-first-child"),a.last().addClass("is-last-child")})}});var S=(e,t=0)=>(...i)=>new Promise(s=>{setTimeout(()=>s(e(...i)),t)}),ve=(e,t=0)=>flexbe_cli.is_admin?e:S(e,t),N=(e,t=0,...i)=>S(e,t)(...i),ie=(e,t=0,...i)=>ve(e,t)(...i),U=Symbol("ref"),se="detached";function ae(e){let t=flexbe_cli.resize.responsiveMode;$(e).find(`[data-hidden="all"], [data-hidden="${t}"]`).toArray().forEach(i=>{let s=$(`<!--${se}-->`)[0];s[U]=i,$(i).before(s).detach()})}function oe(e){let t=document.createNodeIterator(e,NodeFilter.SHOW_COMMENT),i=[];for(;t.nextNode();){let s=t.referenceNode;s.textContent===se&&s[U]&&i.push(s)}i.forEach(s=>{let a=s[U];s.parentNode.replaceChild(a,s)})}function I(e,t,i,s={}){let a=$(e),o=t?`[data-component="${t}"]`:"[data-component]";a.is(o)&&a.trigger(i,s),$(e).find(o).each((n,r)=>{$(r).trigger(i,s)})}function L(e=[]){e.forEach(S(t=>{I(t,"image","setImage")}))}function k(e){e.params.virtualTranslate=!0,e.params.cssMode=!1,e.params.slidesPerGroup=1,e.params.spaceBetween=0,e.on("init",S(()=>{$(e.el).addClass("swiper-effect-fade")})),e.on("setTranslate",(t,i)=>{let{slides:s,size:a,slidesSizesGrid:o}=t;if(t.params.effect!=="fade"||Number.isNaN(i))return;$(t.wrapperEl).css("transform","");for(let r=0;r<s.length;r+=1){let h=t.slides.eq(r),l=-(o.slice(0,r).reduce((d,p)=>d+p,0)+i)/o[r];h.css({left:`-${r*100}%`,opacity:Math.min(Math.max(1-Math.abs(l),0),1)})}let n=!1;t.slides.transitionEnd(()=>{n||!t||t.destroyed||(n=!0,t.animating=!1,$(t.wrapperEl).trigger("transitionend"))})})}var be=class{constructor(e,t){t={init:!0,targets:"span",...t},this.options=t,this.pagination=e,this.tag=this.options.tag,this.filled=!1,this.states=["hidden","prev-prev","prev","main","next","next-next","hidden"],this.init()}init(){this.bindEvents(),this.options.init&&this.render({states:this.states,force:!0})}bindEvents(){let{tag:e,pagination:t,options:i}=this,s=$(t);typeof i.onClick=="function"&&s.off("click").on("click",e,a=>{let o=$(a.currentTarget),n=+o.siblings('[data-state="main"]').attr("data-index"),r=+o.attr("data-index")-n;i.onClick(r)})}move(e){let t=this.states,i=this.filled&&e;if(!(i&&this.inAnimate===e)&&(this.render({states:t,force:!0}),i)){let s=t.map((a,o)=>t[o+(e==="prev"?1:-1)]||"hidden");this.inAnimate=e,clearTimeout(this._anim),this._anim=setTimeout(()=>{this.inAnimate=!1},200),requestAnimationFrame(()=>{this.render({states:s})})}}render({states:e,force:t}={}){let i=$(this.pagination),s=this.tag;if(this.filled=!0,t){let a=e.reduce(o=>`${o}<${s}></${s}>`,"");i.html(a)}i.addClass("swiper-pagination-bullets-dynamic"),i.find(s).each((a,o)=>{let n=$(o),r=e[a]||"hidden",h=["swiper-pagination-bullet"];r==="main"&&h.push("swiper-pagination-bullet-active"),r==="hidden"?h.push("swiper-pagination-bullet-hidden"):h.push(`swiper-pagination-bullet-active-${r}`),n.attr("class",h.join(" ")),n.attr("data-state",r),n.attr("data-index",a)})}};function $e(e){e.params.virtualTranslate=!0,e.params.cssMode=!1,e.on("init",S(()=>{$(e.el).addClass("swiper-effect-slide")})),e.on("setTranslate",(t,i)=>{if(t.params.effect!=="slide"||Number.isNaN(i))return;let s=$(t.wrapperEl),a=$(t.slides),o=t.isHorizontal(),n=o?i:0,r=o?0:i;flexbe_cli.is_admin?s.css({position:"relative",top:`${r}px`,left:`${n}px`,transform:""}):s.css({transform:`translate3d(${n}px, ${r}px, 0px)`}),a.css({opacity:"",transform:""})})}var D={},M=class extends m{static is="cards";constructor(...e){super(...e);let{component:t,$component:i}=this;if(this.id=this.core.id,this.mode=t.getAttribute("data-mode"),this.mode==="slider"){this.require=["/_s/lib/swiper8/dist/swiper-bundle.min.js?v847"],this.$cardsRoot=i.closest(".flexbe-cards-root"),this.$slider=this.$cardsRoot.find(".swiper"),this.$pagination=this.$cardsRoot.find(".slider-pagination--cards"),this.$navigation=this.$cardsRoot.find(".slider-button--cards"),this.$swiperHelper=this.$cardsRoot.find(".swiper-mobile-helper"),this.$flexbeCardsSlider=this.$cardsRoot.find(".flexbe-cards-slider"),this.$flexbeCards=this.$cardsRoot.find(".flexbe-cards"),this.$flexbeCard=this.$cardsRoot.find(".flexbe-card"),this.sliderResponsive=this.$slider.attr("data-slider-responsive-mode");let s;this.$slider.on("bringIntoView",a=>{let o=this.swiper,n=$(a.target).closest(this.$flexbeCard)[0],r=this.$flexbeCard.index(n);s!==r&&(s=r,o?r!==-1&&o.slideTo(r):D[this.id]=r)})}}onLoad(){this.sliderDisposer(),this.core.inView&&this.initSwipeAnimation()}onBeside({state:e}){e&&this.sliderDisposer()}onScreen({state:e}){e?this.sliderDisposer():this.destroySwipeAnimation()}onView({state:e}){e&&!this.wasView&&this.swiper&&this.swiper.inited&&(this.swiper.update(),this.checkSlidesVisibility(),this.checkNavigationState()),this.toggleAutoplay(e),e&&this.isLoaded&&this.initSwipeAnimation()}onResize(){if(this.sliderDisposer(),this.swiper){let e=this.getViewportSpecificSettings();this.settings={...this.settings,...e},this.swiper.params={...this.swiper.params,...e},setTimeout(()=>{this.swiper.update(),this.checkSlidesVisibility()},10)}}onHideShowUI(){this.destroySlider(),this.initSlider()}sliderDisposer(){if(this.mode!=="slider"||!this.isLoaded||!this.core.isVisible)return;this.responsiveMode=flexbe_cli.resize.responsiveMode;let e=flexbe_cli.resize.responsiveMode==="mobile",t=this.sliderResponsive,i=e?t!=="desktop":t!=="mobile";this.$cardsRoot.toggleClass("slider-enabled",i).toggleClass("slider-disabled",!i),this.$flexbeCards.toggleClass("slider-wrapper",i),i&&!this.swiper?this.initSlider():!i&&this.swiper&&this.destroySlider()}initSlider(){if(!(this.mode!=="slider"||this.swiper||typeof Swiper>"u"))try{this.savePropsFromAttributes(),this.createSwiperSettings(),this.createSwiperInstance(),this.createSwiperNavigation(),this.createSwiperLoopPagination(),this.createSwiperEditorFixes(),N(()=>{this.swiper.init(),N(()=>this.toggleAutoplay(this.core.inView))})}catch(e){console.warn(e)}}destroySlider(){this.mode==="slider"&&(this.swiper&&this.swiper.destroy(),this.swiper=null,this.$cardsRoot.removeClass("slider-inited slider-enabled"),this.$cardsRoot.addClass("slider-disabled"),this.$flexbeCardsSlider.removeClass("swiper-active"),this.$flexbeCards.removeClass("swiper-wrapper"),this.$flexbeCard.removeClass("swiper-slide-hidden"))}initSwipeAnimation(){this.mode==="slider"&&flexbe_cli.resize.responsiveMode==="mobile"&&this.sliderResponsive!=="desktop"&&!this.$swiperHelper.hasClass("show")&&setTimeout(()=>{this.core.inView&&(this.$swiperHelper.addClass("show"),this.swiper.once("sliderMove",()=>{this.destroySwipeAnimation()}))},500)}destroySwipeAnimation(){this.mode==="slider"&&this.$swiperHelper.hasClass("show")&&this.$swiperHelper.removeClass("show")}savePropsFromAttributes(){this.props={totalSlides:+this.$slider.attr("data-count"),isOverflow:+this.$slider.attr("data-overflow"),autoplayDelay:flexbe_cli.run.is_preview&&Math.floor(+this.$slider.attr("data-autoplay")*1e3)||0,pagination:this.$pagination.attr("data-type")||!1,loop:flexbe_cli.run.is_preview&&!!+this.$slider.attr("data-loop"),effectDesktop:this.$slider.attr("data-effect"),effectMobile:this.$slider.attr("data-effect-mobile"),inRowDesktop:+this.$slider.attr("data-cards"),inRowMobile:+this.$slider.attr("data-cards-mobile")||1}}createSwiperSettings(){let e=this.getViewportSpecificSettings(),{totalSlides:t,isOverflow:i,autoplayDelay:s,pagination:a}=this.props,o=t<=e.slidesPerView?!1:this.props.loop,n=Math.max(0,Math.min(t-1,D[this.id]||0));if(this.freeSlides=0,o&&!i){let r=this.$slider[0].offsetWidth,h=r/e.slidesPerView,l=(flexbe_cli.resize.viewportWidth-r)/2;this.freeSlides=Math.ceil(l/h)}this.settings={autoHeight:this.$slider.find(".align-items-stretch").length===0,preloadImages:!1,allowClick:!0,preventClicks:!1,preventClicksPropagation:!1,touchStartPreventDefault:!1,touchMoveStopPropagation:!1,preventInteractionOnTransition:!1,loopPreventsSlide:!1,simulateTouch:!flexbe_cli.run.isTouch&&flexbe_cli.run.is_preview,longSwipesRatio:.1,longSwipesMs:100,initialSlide:n,loop:o,autoplay:s?{delay:s,stopOnLastSlide:!o,disableOnInteraction:!0,waitForTransition:!0}:!1,navigation:{},pagination:{clickable:!0,type:o&&a==="bullets"?"custom":a,el:this.$pagination[0],dynamicBullets:this.$flexbeCard.length>7,dynamicMainBullets:e.slidesPerView,renderCustom:()=>{},formatFractionCurrent:()=>this.getGroupIndex()+1,formatFractionTotal:()=>Math.ceil(this.props.totalSlides/this.swiper.params.slidesPerView)},watchSlidesProgress:!0,loopedSlides:e.slidesPerView+this.freeSlides,...e}}getViewportSpecificSettings(){let e=flexbe_cli.resize.responsiveMode==="mobile",t=e?this.props.inRowMobile:this.props.inRowDesktop,i=e?this.props.effectMobile:this.props.effectDesktop;return t>1&&(i="slide"),{effect:i,speed:flexbe_cli.run.is_preview&&i==="fade"?450:300,slidesPerView:t}}createSwiperInstance(){this.swiper&&(this.swiper.destroy(),this.swiper=null);let e=!1,t,i=new Swiper(this.$slider[0],{init:!1,wrapperClass:"flexbe-cards",slideClass:"flexbe-card",...this.settings});i.params.effect==="fade"?k(i):$e(i);let s=()=>{e||(e=!0,this.$cardsRoot.addClass("slider-inited"),this.$slider.addClass("swiper-inited"));let l=this.props.totalSlides>i.params.slidesPerView;t!==l&&(t=l,this.$cardsRoot.toggleClass("slider-enabled",l),this.$cardsRoot.toggleClass("slider-disabled",!l),this.$slider.toggleClass("swiper-active",l),i.update())},a=()=>{if(i.loopedSlides){let l=$(i.slides).filter(`.${i.params.slideDuplicateClass}`),d={};l.each((p,w)=>{let u=$(w),C=u.attr("data-swiper-slide-index"),A=$(i.slides).eq(i.loopedSlides+ +C);d[C]=d[C]?d[C]+1:1,u.attr("data-cloned",d[C]);let O=A.find("[data-action]"),q=u.find("[data-action]");O.each((_,z)=>{let c=$(z).data();q.eq(_).data(c)})}),flexbe_cli.entity.initArea(l)}},o=()=>{if(i.params.autoHeight){let l=new ResizeObserver(()=>{i.updateAutoHeight()});i.slides.forEach(d=>l.observe(d)),i.on("destroy",()=>{l.disconnect()}),i.on("slideChange",()=>{i.updateAutoHeight()})}};flexbe_cli.is_admin||(i.on("beforeInit",()=>{ae(this.swiper.el)}),i.on("destroy",()=>{oe(this.swiper.el)})),i.onAny((l,d)=>{i.el.dispatchEvent(new CustomEvent(`swiper:${l}`,{detail:d,bubbles:!1,cancelable:!0}))}),i.on("init",S(()=>{s(),a(),o(),this.checkSlidesVisibility()})),i.on("slideChange",S(()=>{this.checkSlidesVisibility()})),i.on("resize",$.debounce(()=>{this.swiper&&(s(),this.checkSlidesVisibility())},50));let n=!1,r=()=>{this.$cardsRoot.addClass("swiper-in-interacting"),this.checkSlidesVisibility()},h=()=>{this.$cardsRoot.removeClass("swiper-in-interacting"),this.checkSlidesVisibility()};i.on("sliderFirstMove",()=>{n=!0,r()}),i.on("touchEnd",()=>{n=!1,h()}),i.on("transitionStart",()=>{n||r()}),i.on("transitionEnd",()=>{n||h(),i.realIndex+i.loopedSlides!==i.activeIndex&&i.loopFix()}),this.$slider.on("reduceSliderControls",(l,{state:d=!0})=>{this.preventAutoplay=!!d,this.preventAutoplay&&this.toggleAutoplay({state:!1}),this.$cardsRoot.toggleClass("swiper-reduce-controls",!!d)}),this.$slider.on("preventSliderMove",(l,{state:d=!0})=>{i.allowTouchMove=!d}),this.swiper=i}createSwiperNavigation(){let e=this.swiper;e.on("init",()=>{this.checkNavigationState()}),e.on("resize",$.debounce(()=>{this.swiper&&this.checkNavigationState()},50)),e.on("slideChange",()=>{this._skipSlide||this.checkNavigationState()}),this.$navigation.on("click",t=>{let i=t.currentTarget.getAttribute("data-direction");this[i==="prev"?"prevSlide":"nextSlide"]()}),this.$slider.on("click.swiper-hidden",".swiper-slide-hidden",t=>{t.preventDefault(),t.stopPropagation();let i=this.swiper;if(i.animating)return;let s=t.currentTarget,a=Array.from(i.slides||[]).findIndex(h=>h===s),o=i.activeIndex,n=o-a,r=a-(o+i.params.slidesPerView-1);n>0?this.prevSlide(n):r>0&&this.nextSlide(r)})}createSwiperLoopPagination(){let e=this.swiper,t=!1;e.on("paginationRender",()=>{if(this.$pagination.toggleClass("disabled",this.props.totalSlides<=e.params.slidesPerView),this._skipSlide||e.params.pagination.type!=="custom")return;this.customPagination||(this.customPagination=new be(this.$pagination[0],{init:!1,tag:"span",onClick:n=>{n<0?this.prevSlide():n>0&&this.nextSlide()}}));let i=e.previousIndex,s=e.activeIndex,a=this.props.totalSlides,o=i<s?"next":"prev";(i!==s&&!(o==="next"&&i===s-a)&&!(o==="prev"&&i===s+a)||!t)&&this.customPagination.move(o),t=!0})}createSwiperEditorFixes(){if(!flexbe_cli.is_admin)return;let e=this.swiper;e.on("slideChange",()=>{D[this.id]=e.realIndex})}checkSlidesVisibility(){let e=this.swiper;e.updateSlides();let t=$(e.slides),i=t.slice(e.activeIndex,e.activeIndex+e.params.slidesPerView),s=t.not(i);s.removeClass("swiper-slide-visible").addClass("swiper-slide-hidden"),i.removeClass("swiper-slide-hidden").addClass("swiper-slide-visible"),I(s,!1,"sliderDeactivate"),I(i,!1,"sliderActivate")}checkNavigationState(){let e=this.swiper,t=e.params.navigation.disabledClass,i=this.$navigation,s=i.eq(0),a=i.eq(1),{isBeginning:o,isEnd:n}=e;e.loopedSlides&&(o=!1,n=!1),i.toggleClass("disabled",this.props.totalSlides<=e.params.slidesPerView),s.toggleClass(t,o),a.toggleClass(t,n)}getGroupIndex(e,t,i=!0){let s=this.swiper;e==null&&(e=s.realIndex),t||(t=s.params.slidesPerView||1),i&&(s.loopedSlides||t<=1)&&(i=!1);let a=Math.ceil(this.props.totalSlides/t),o=Math.floor(e/t);if(i){let n=o*t,r=n+t-1,h=e-n>r-e,l=e%t!==0&&e+t>=this.props.totalSlides;(h||l)&&(o+=1)}return Math.max(0,Math.min(a,o))}getSlideIndex(e,t){return t==null&&(t=this.swiper.params.slidesPerView||1),e*t}toSlide(e,t){let i=this.swiper,s=this.getSlideIndex(e,t);return i.loopedSlides?i.slideToLoop(s):i.slideTo(s)}prevSlide(e){let t,i=this.swiper;e?e=Math.abs(e):e=1;let s=i.activeIndex;if(i.loopedSlides){let a=s,o=this.props.isOverflow?e:e+this.freeSlides;s+this.props.totalSlides<=i.slides.length&&!(a>=o)&&(this.toggleSkip(!0),i.slideTo(s+this.props.totalSlides,0)),t=i.activeIndex-e}else t=i.activeIndex-e;setTimeout(()=>{this.toggleSkip(!1),i.slideTo(t)},5)}nextSlide(e){let t,i=this.swiper,s=i.params.slidesPerView;e?e=Math.abs(e):e=1;let a=i.activeIndex,o=a+s-1;if(i.loopedSlides){let n=i.slides.length-o-1,r=this.props.isOverflow?e:e+this.freeSlides;a-this.props.totalSlides>=0&&!(n>=r)&&(this.toggleSkip(!0),i.slideTo(a-this.props.totalSlides,0)),t=i.activeIndex+e}else t=i.activeIndex+e;setTimeout(()=>{this.toggleSkip(!1),i.slideTo(t)},5)}toggleSkip(e=!this._skipSlide){this._skipSlide=!!e,this.$slider.toggleClass("noanimate",this._skipSlide)}toggleAutoplay(e){if(!this.swiper)return;this.preventAutoplay&&(e=!1);let t=this.swiper,i=t.autoplay,s=t.params.autoplay||{};!i||!s.enabled||(e&&!i.running?i.start():e||i.stop())}};flexbe_cli.entity.setClientJs("element","zone_cards",{components:[M],onUpdate(e){e.originId===e.id&&this.fixSwiper(e)},fixSwiper(e={}){clearTimeout(this._changeTimer);let t=flexbe_cli.components.getInstances(this.area).filter(s=>s.is==="cards")?.[0],i=t&&t.swiper;if(!i)return!1;if(document.body.contains(i.el)){if(e&&e.reason==="items_add"){let s=i.realIndex,a=e.reasonData.to,o=s;s+i.params.slidesPerView<=a&&(o=a-i.params.slidesPerView+1),o!==s&&(this._changeTimer=setTimeout(()=>i.slideTo(o),30))}e.styleRendered&&!e.templateRendered&&requestAnimationFrame(()=>i.$el&&i.update(!1))}else this._changeTimer=setTimeout(()=>this.fixSwiper(e),16)}});var v={},E=class extends m{static is="image";isImgLoaded=!1;params=null;constructor(e){super(e),this.imageLoadingOptions=flexbe_cli.vars.site.images,this.lazyLoad=this.component.hasAttribute("data-img-lazy"),this.autoLoad=this.component.hasAttribute("data-img-autoload"),this.hasImagePlaceholder=this.component.hasAttribute("data-has-placeholder"),this.imageLayer=this.$component.find(".component-image__image").get(0)||this.component,this.overlayLayer=this.$component.find(".component-image__scroll").get(0)}async onInit(){this.autoLoad&&!this.lazyLoad&&await this.loadImage(),this.$component.off(".componentImage"),this.$component.on("setImage.componentImage",$.debounce(async e=>{e.detail?.reason==="lazyPriority"&&!this.autoLoad||(this.autoLoad=!0,this.lazyLoad=!0,this.isVisible&&!this.isImgLoading&&!this.isImgLoaded&&await this.loadImage())},10))}async onBeside({state:e}){if(!e)return!1;!this.isImgLoaded&&this.autoLoad&&await this.loadImage()}async onResize(){this.isImgLoaded&&this.autoLoad&&(clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(()=>this.loadImage(!0),1e3))}onHideShowUI(e){e==="generation"&&requestAnimationFrame(()=>{this.component&&this.params?.position&&(this.component.style.setProperty("--imagePositionX",this.params.position.x),this.component.style.setProperty("--imagePositionY",this.params.position.y))})}async loadImage(e=!1){if(this.setParams(),!e&&(this.isImgLoaded||this.isImgLoading))return;this.setOverlay();let t,i=this.params;i.original_resolution||(t=await this.getOptimalSize(),t&&v[this.params.id].sizes&&!v[this.params.id].sizes.includes(t)&&v[this.params.id].sizes.push(t)),this.isImgLoading=!0;let s=y(i,t,this.imageLoadingOptions);if(this.hasImagePlaceholder&&s)try{await P(s)}catch(a){console.error("Image preload error",a);return}this.setImage(s),this.isImgLoading=!1}async getOptimalSize(){let e=this.params,t=await W(e);e.proportion=t,v[this.params.id]&&(v[this.params.id].params.proportion=t);let i=this.componentWidth||this.component.offsetWidth,s=this.componentHeight||this.component.offsetHeight,{width:a}=await b(this.params,{width:i,height:s},this.imageLoadingOptions),o=a-2,n=Math.max(50,a*1.2);return a=this.getClosestSize(a,o,n),a}setImage(e){let{$component:t,params:i}=this;e&&(i.type==="image"?this.imageLayer.src=e:i.type==="background"&&(this.imageLayer.style.backgroundImage=`url(${e})`),this.isImgLoaded||(t.removeClass("loading"),this.isImgLoaded=!0),t.trigger("load"))}setOverlay(){let{overlayLayer:e,componentWidth:t,componentHeight:i}=this;if(!e)return;let s="medium";t<=200||i<=150?s="xsmall":t<=400||i<=250?s="small":t>=650&&i>=400&&(s="large"),e.setAttribute("data-size",s),e.getAttribute("data-type")==="hover"&&$(e).on("pointerenter pointerleave",a=>{let o=a.type==="pointerenter";$(e).toggleClass("hover",o)})}setParams(){if(this.params)return;let e=this.component,t=$(e),i={},s=t.attr("data-img-id");if(v[s]?.params)i={...v[s].params};else if(i.id=s,i.ext=t.attr("data-img-ext"),i.proportion=+t.attr("data-img-proportion"),i.position={x:t.attr("data-img-x")||"50%",y:t.attr("data-img-y")||"50%"},!i.ext){let a=(t.attr("data-img-name")||"image.jpg").match(/\.(\D{2,4})$/i)||[];a[1]&&i.ext!==a[1]&&(i.ext=a[1]||!1)}i.type=t.attr("data-img-type"),i.action=t.attr("data-action"),i.proportion||(i.proportion=100),i.scale=t.attr("data-img-scale")||"cover",i.original_resolution=e.hasAttribute("data-img-original"),v[i.id]||(v[i.id]={params:{...i},sizes:[]}),i.animated=e.hasAttribute("data-img-animated"),i.transparent=e.hasAttribute("data-img-transparent"),this.params=i}getClosestSize(e,t=e,i=e+10){let s=v[this.params.id].sizes||[],a,o=1/0;return s.forEach(n=>{let r=Math.abs(n-e);n>=t&&n<=i&&r<o&&(a=n,o=r)}),a??e}};function x(e,t,i){let s;return typeof t=="function"&&typeof e=="function"&&(e()?t():(i&&setTimeout(()=>{clearInterval(s),t()},i),s=setInterval(()=>{e()&&(clearInterval(s),t())},25))),()=>clearInterval(s)}var R=class{inited=!1;loaded=!1;destroyed=!1;abortController=new AbortController;constructor(e){this.options=e,this.target=e.target}async init(){this.inited=!0,await this.whenLoaded(),this.loaded=!0}destroy(){this.abortController.abort(),this.destroyed=!0}whenLoaded(e=()=>{}){return new Promise(t=>{if(this.loaded){e(),t();return}if(this.type==="video")this.loaded=!0,e(),t();else{let i=!1,s=setTimeout(()=>{this.loaded=!0,i||(i=!0,e(),t())},1e3);$(this.target).one("load",()=>{clearTimeout(s),this.loaded=!0,i||(i=!0,e(),t())})}})}async play(){}pause(){}onLoadData(){this.options.onLoadData?.()}onPlay(){this.options.onPlay?.()}onPause(e){this.options.onPause?.(e)}onError(e){this.options.onError?.(e)}},j=class extends R{type="embed";async init(){let e=this.target;if(!e)return;let t=e.getAttribute("data-src"),i=e.getAttribute("src");t&&!i&&(e.src=t),this.inited=!0,await this.whenLoaded(),this.loaded=!0}async play(){await this.whenLoaded(),this.target.contentWindow?.postMessage("play","*")}async pause(){this.target.contentWindow?.postMessage("pause","*")}},Se=class extends R{type="embed";async init(){let e=this.target,t=e.getAttribute("data-src"),i=e.getAttribute("src"),s=a=>{(a===window.YT.PlayerState.BUFFERING||a===window.YT.PlayerState.PLAYING)&&this.onLoadData(),a===window.YT.PlayerState.PLAYING?this.onPlay():(a===window.YT.PlayerState.PAUSED||a===window.YT.PlayerState.ENDED)&&this.onPause()};t&&!i&&(e.src=t),this.inited=!0,await this.whenLoaded(),flexbe_cli.require([`https://www.youtube.com/iframe_api?origin=${window.location.host}`],()=>{this.destroyed||!this.target.isConnected||x(()=>window.YT?.Player,()=>{this.ytVideo=new window.YT.Player(e,{events:{onStateChange:a=>s(a.data),onReady:()=>s(this.ytVideo.getPlayerState())}})})}),this.loaded=!0}async play(){await this.whenLoaded(),this.target.contentWindow?.postMessage('{"event":"command","func":"playVideo","args":""}',"*")}async pause(){this.target.contentWindow?.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")}},xe=class extends R{type="embed";async init(){let e=this.target,t=e.getAttribute("data-src"),i=e.getAttribute("src");t&&!i&&(e.src=t),this.inited=!0,await this.whenLoaded(),flexbe_cli.require(["https://player.vimeo.com/api/player.js"],()=>{this.destroyed||!this.target.isConnected||(this.vPlayer=new window.Vimeo.Player(e),this.vPlayer.on("play",()=>this.onPlay()),this.vPlayer.on("pause",()=>this.onPause()))}),this.loaded=!0}async play(){await this.whenLoaded(),this.vPlayer&&this.vPlayer.play()}async pause(){this.vPlayer&&this.vPlayer.pause()}},Ie=class extends j{type="embed";playerReady=!1;player;async init(){let e=this.target;if(!e)return;let t=e.src||e.dataset.src;this.inited=!0,this.loaded=!0,e.id=crypto.randomUUID();try{if(await flexbe_cli.require(["https://player.kinescope.io/latest/iframe.player.js"],null,5e3),this.destroyed||!e.isConnected)return;let i=Object.fromEntries(new URL(t).searchParams.entries());this.player=await Kinescope.IframePlayer.create(e.id,{url:t,playlist:[],behavior:{preload:"none",playsInline:!0,autoPlay:i.autoplay?"viewable":!1,autoPause:!1,localStorage:!1,loop:i.loop==="1",muted:i.muted==="1"},ui:{controls:i.controls!=="0",language:["ru","kk","be"].includes(flexbe_cli.vars.page.language)?"ru":"en"}}),this.player.on(Kinescope.IframePlayer.Events.Play,()=>this.onPlay()),this.player.on(Kinescope.IframePlayer.Events.Pause,()=>this.onPause())}catch(i){if(this.destroyed||!e||!e.isConnected)return;console.error(i),e.src!==t&&(e.src=t),await this.whenLoaded()}this.playerReady=!0}async destroy(){super.destroy(),this.player&&await this.player.destroy()}async play(){return new Promise(e=>{x(()=>this.playerReady,async()=>{await this.player?.play(),e()},7e3)})}async pause(){this.player&&await this.player.pause()}},Ce=class extends R{type="video";_wasClicked=!1;async init(){let e=this.target,t=e.poster||e.dataset.poster,i=e.getAttribute("data-src"),s=e.getAttribute("src");if(e.addEventListener("error",a=>this.onError(a.error)),e.addEventListener("loadeddata",this.onLoadData.bind(this)),e.addEventListener("playing",this.onPlay.bind(this)),e.addEventListener("pause",()=>{let a=this._wasClicked||e.currentTime===e.duration;this.onPause(a)}),e.addEventListener("pointerup",this.onClick.bind(this)),t&&(this.target.poster=t),i&&!s){let a=document.createElement("source");a.addEventListener("error",o=>this.onError(o.error||o)),a.setAttribute("type","video/mp4"),a.setAttribute("src",i),e.appendChild(a),e.load()}this.inited=!0,await this.whenLoaded(),this.loaded=!0}async play(){await this.whenLoaded(),await this.target.play()}async pause(){this.target.pause()}onClick(){this.target.paused||(this._wasClicked=!0,setTimeout(()=>{this._wasClicked=!1},100))}},_e=class extends j{playerReady=!1;async init(){await super.init();let e=t=>{let i=t.data;if(typeof i=="string")try{i=JSON.parse(t.data)}catch{}t.source===this.target.contentWindow&&(["player:ready","player:changeState"].includes(i.type)&&(this.playerReady=!0),i.type==="player:changeState"&&(i.data.state==="playing"?this.onPlay():i.data.state==="paused"&&this.onPause()))};window.addEventListener("message",e,{signal:this.abortController.signal})}async play(){this.command("player:mute"),this.command("player:setCurrentTime",{time:0}),this.command("player:play")}async pause(){this.command("player:pause")}command(e,t={}){x(()=>this.loaded&&this.playerReady,()=>{this.target.contentWindow?.postMessage(JSON.stringify({type:e,data:t}),"*")})}},H=class extends m{static is="video";constructor(...e){super(...e);let t;switch(this.$preview=this.$component.find(".component-video__preview"),this.$iframe=this.$component.find("iframe"),this.$video=this.$component.find("video.custom-video"),this.type=this.$component.data("type"),this.autoplay=!!+this.$component.data("autoplay"),this.autoInit=this.autoplay||!this.$preview.length||this.$preview.hasClass("no-image"),this.type){case"custom":t=Ce;break;case"youtube":t=Se;break;case"vimeo":t=xe;break;case"kinescope":t=Ie;break;case"rutube":t=_e;break;default:t=j}this.provider=new t({target:this.type==="custom"?this.$video[0]:this.$iframe[0],onPlay:this.onPlay.bind(this),onPause:this.onPause.bind(this),onError:this.onError.bind(this),onLoadData:this.onLoadData.bind(this)}),this.$preview.removeAttr("hidden"),this.$preview.on("click",async()=>{await this.#t(),await this.play(!0)}),this.$component.off("sliderActivate").on("sliderActivate",async()=>{this.preventAutoplay=!1,this.inScreen&&this.autoInit&&(await this.#t(),this.autoplay&&await this.play())}),this.$component.off("sliderDeactivate").on("sliderDeactivate",async()=>{this.preventAutoplay=!0,await this.pause()})}onDestroy(){this.provider.destroy()}async onScreen({state:e}){e?(this.autoInit&&await this.#t(),this.autoplay&&!this.preventAutoplay&&await this.play()):await this.pause()}async#t(){this.provider.inited||(this.$component.addClass("loading"),await this.provider.init(),this.$component.removeClass("loading"),this.$component.addClass("loaded"))}async play(e=!1){this.isAutoplaying=!e,this.isPaused=!1,this.$preview.off("click").addClass("preloading");try{await this.provider.play(),this.$preview.fadeOut(150,()=>{this.$preview.remove(),this.$component.removeClass("overlayed")})}catch(t){console.warn(t)}}async pause(){this.isAutoplaying=!1,this.isPaused=!0;try{await this.provider.pause()}catch{}}onPlay(){this.isPaused=!1,this.preventAutoplay=!1,!this.autoplay&&!flexbe_cli.is_admin&&flexbe_cli.resize.responsiveMode==="mobile"&&this.component.closest('[data-hidden="desktop"]')&&(this.viewportLocked=!0,flexbe_cli.resize.lockMode(!0)),(!this.autoplay||!this.isAutoplaying)&&(this.sliderAutoplayPrevented=!0,this.$component.trigger("reduceSliderControls",{state:!0}))}onPause(e=this.inScreen){this.isPaused=!0,e&&(this.preventAutoplay=!0),this.viewportLocked&&(this.viewportLocked=!1,flexbe_cli.resize.lockMode(!1)),this.sliderAutoplayPrevented&&(this.sliderAutoplayPrevented=!1,this.$component.trigger("reduceSliderControls",{state:!1}))}onError(e){console.error(e)}onLoadData(e){this.$component.addClass("started")}};flexbe_cli.entity.setClientJs("element","zone_gallery",{components:[M,E,H],onUpdate(e={}){setTimeout(()=>{let t=flexbe_cli.components.getInstances(this.area).filter(s=>s.is==="cards")?.[0],i=t&&t.swiper;if(i){if(e&&e.reason==="items_add"){let s=i.realIndex,a=e.reasonData.to,o=s;s+i.params.slidesPerView<=a&&(o=a-i.params.slidesPerView+1),o!==s&&i.slideTo(o)}e.styleRendered&&requestAnimationFrame(()=>i.update(!1))}},100)}});flexbe_cli.entity.setClientJs("element","zone_grid",{isPure:!0});var Pe=new Array(70).fill(1).map((e,t)=>50+50*t),T=class extends m{static is="icon";isCreated;isImgLoaded;isLazyLoading;image;imageLoadingOptions;async onInit(){this.$component.on("setImage",async()=>{this.isVisible&&!this.isImgLoaded&&(this.isCreated||this.create(),await this.loadImage())})}async onBeside({state:e}){e&&(this.isCreated||this.create(),this.isLazyLoading&&!this.isImgLoaded&&await this.loadImage())}async onResize(){this.isCreated&&await this.loadImage()}create(){let e=this.$component.data();this.imageLoadingOptions=flexbe_cli.vars.site.images,this.isLazyLoading=!!e.imgLazy,this.image={url:e.imgUrl||null,id:e.imgId,ext:e.imgExt,proportion:e.imgProportion,width:e.imgWidth,animated:e.imgAnimated,transparent:e.imgTransparent,scale:e.imgScale,type:"background"},this.isCreated=!0}async loadImage(){let e=this.$component.find(".vector-icon use"),t=this.$component.find(".custom-icon");if(e.length&&e.attr("href",this.image.url),t.length){let i=this.image.url;if(this.image.id){let s={width:this.componentWidth,height:this.componentHeight},{width:a}=await b(this.image,s,{...this.imageLoadingOptions,sizes:Pe});i=y(this.image,a,this.imageLoadingOptions)}i&&t.css("background-image",`url(${i})`)}this.isImgLoaded=!0}};flexbe_cli.entity.setClientJs("element","icon01",{components:[T],isPure:!0});function Ee(e){e.params.virtualTranslate=!0,e.params.cssMode=!0}var Y="swiper-slide",ne=class extends m{static is="slider";require=["/_s/lib/swiper8/dist/swiper-bundle.min.js?v847"];constructor(...e){super(...e);let{component:t}=this;this.swiper=null,this.initialSlide=0,this.index=$(t).closest("[data-item-id]").attr("data-item-id"),this.sliderEl=t.classList.contains("swiper")?t:t.querySelector(".swiper"),this.paginationEl=t.querySelector(".slider-pagination"),this.prevEl=t.querySelector('.slider-prev, [data-direction="prev"]'),this.nextEl=t.querySelector('.slider-next, [data-direction="next"]'),this.$component.on("bringIntoView",i=>{let s=this.swiper,a=$(this.sliderEl).find(`.${Y}`),o=$(i.target).closest(`.${Y}`),n=a.index(o);s?n!==-1&&s.slideTo(n):this.initialSlide=n}),this.setSwiperOptions()}onLoad(){this.inScreen&&!this.swiper&&this.initSwiper()}onScreen({state:e}){!e||!this.isLoaded||this.swiper||this.initSwiper()}onView({state:e}){this.isLoaded&&(e&&!this.swiper&&this.initSwiper(),this.swiper&&this.toggleAutoplay({state:e}))}onResize(){this.swiper&&(this.setSliderSize(),this.setThumbnailsSize(),this.swiper&&this.swiper.initialized&&this.swiper.update())}onDestroy(){this.destroySwiper()}onHideShowUI(e){this.setSwiperOptions(e!=="editor"),this.destroySwiper(),this.initSwiper()}setSwiperOptions(e=flexbe_cli.run.is_preview){let t=this.paginationEl&&this.paginationEl.getAttribute("data-type")||"bullets",i=this.paginationEl&&this.paginationEl.getAttribute("data-direction")||"horizontal",s=!!Number(this.$component.attr("data-loop")),a=Number(this.$component.attr("data-autoplay"));this.options={paginationType:t,direction:i,count:this.$component.attr("data-count"),loop:e&&s,autoplay:e&&a||!1,effect:this.$component.attr("data-effect")||"slide",slidesPerView:"auto"}}initSwiper(){if(this.swiper||typeof Swiper>"u")return!1;let{options:e,component:t,core:i,root:s,index:a,sliderEl:o,paginationEl:n,prevEl:r,nextEl:h}=this,l=`${i&&i.id||"-"}:${a}`,{count:d,loop:p,paginationType:w,effect:u,direction:C}=e,A=flexbe_cli.theme_id===4,O=this.owner.closest(".swiper-inited"),q=e.autoplay?{delay:e.autoplay*1e3,stopOnLastSlide:!p,disableOnInteraction:!1,waitForTransition:!1}:!1,_=this.initialSlide;flexbe_cli.run.is_preview||(s._sliderState?s._sliderState[l]&&(_=Math.max(0,Math.min(d-1,s._sliderState[l])||0)):s._sliderState={},s._sliderState[l]=_);let z={el:n,type:w,clickable:!0,dynamicBullets:A,dynamicMainBullets:3};w==="thumbs"&&(z.type=!1,z.el=null,this.thumbsSwiper=new Swiper(n,{cssMode:!0,loop:!1,slidesPerView:"auto",normalizeSlideIndex:!1,direction:C}));let c=new Swiper(o,{init:!1,speed:350,nested:O,slideClass:Y,initialSlide:_,autoplay:q,pagination:z,thumbs:{swiper:this.thumbsSwiper},navigation:{prevEl:r,nextEl:h},effect:u,rewind:p,roundLengths:!0,preventInteractionOnTransition:!0,updateOnWindowResize:!1,slidesPerView:e.slidesPerView,simulateTouch:!flexbe_cli.run.isTouch&&flexbe_cli.run.is_preview,longSwipesMs:100,longSwipesRatio:.1,preloadImages:!1,touchReleaseOnEdges:!1,runCallbacksOnInit:!1});if(this.swiper=c,u==="fade"?k(c):A&&Ee(c),c.onAny((f,g)=>{c.el.dispatchEvent(new CustomEvent(`swiper:${f}`,{detail:g,bubbles:!1,cancelable:!0}))}),c.on("init",()=>{if(!c.slides)return;this.setSliderSize(),this.setThumbnailsSize(),this.swiper!=null&&this.swiper.$el.addClass("swiper-inited"),$(r).add(h).add(n).removeClass("disabled");let f=c.slides[_],g=c.visibleSlides||[c.slides[_]];this.thumbsSwiper&&this.thumbsSwiper.visibleSlides?.length&&g.push(...this.thumbsSwiper.visibleSlides),L(g),f&&I(f,!1,"sliderActivate"),this.toggleAutoplay({state:this.inView})}),this.thumbsSwiper&&this.thumbsSwiper.on("slideChange",$.debounce(f=>{L(f.visibleSlides)},50)),c.on("slideChange",$.debounce(()=>{if(!c.initialized)return;flexbe_cli.run.is_preview||(s._sliderState[l]=c.realIndex);let f=c.slides[c.previousIndex],g=c.slides[c.activeIndex],ce=g&&g.getAttribute("data-type"),pe=c.previousIndex<c.activeIndex?Array.from(c.slides).slice(c.activeIndex,c.activeIndex+2):Array.from(c.slides).slice(c.activeIndex-2,c.activeIndex);t.setAttribute("data-current-content",ce),I(f,null,"sliderDeactivate"),I(g,null,"sliderActivate"),L(pe)},50)),c.on("touchStart",()=>{$(o).addClass("swiper-in-interacting")}),c.on("touchEnd",()=>{$(o).removeClass("swiper-in-interacting")}),c.params.cssMode){let f;c.on("slideChange",()=>{clearTimeout(f),c.animating=!0,c.allowSlidePrev=!1,c.allowSlideNext=!1,f=setTimeout(()=>{c.animating=!1,c.allowSlidePrev=!0,c.allowSlideNext=!0},150)})}this.$component.off("reduceSliderControls").on("reduceSliderControls",(f,{state:g=!0})=>{this.preventAutoplay=!!g,this.preventAutoplay&&this.toggleAutoplay({state:!1})}),this.$component.off("pointerenter").one("pointerenter",()=>{let f=Array.from(c.slides||[]);L([c.activeIndex-1,c.activeIndex+1].map(g=>f.at(g)))}),this.$component.off("pointerdown wheel").on("pointerdown wheel",()=>{this.toggleAutoplay({state:!1})}),ie(()=>c.init())}destroySwiper(){if(this.swiper)try{this.swiper.destroy()}catch{}finally{this.swiper=null}}toggleAutoplay({state:e}){let{swiper:t,options:i}=this;if(!t||!i.autoplay||!t.autoplay)return!1;this.preventAutoplay&&(e=!1);let s=t.autoplay.running;e&&!s&&t.autoplay.start(),!e&&s&&t.autoplay.stop()}slideTo(e,t=!0){if(!this.swiper){this.initialSlide=e;return}let i=this.swiper.params.loop;typeof this.swiper.realIndex<"u"&&this.swiper.realIndex!==e&&(i?this.swiper.slideToLoop(e,t?null:0):this.swiper.slideTo(e,t?this.swiper.params.speed:0))}setSliderSize(){let e=this.$component.find(".swiper");if(!e.length)return;let t=e[0];t.style.width="";let i=t.getBoundingClientRect().width,s=t.offsetWidth;if(i%1>0&&Math.abs(s-i)<2){t.style.width=`${Math.round(i)}px`;try{this.swiper.update()}catch{}}}setThumbnailsSize(){if(!this.thumbsSwiper||this.options.paginationType!=="thumbs")return;let e=this.options.direction==="horizontal",t=$(this.paginationEl),i=t.find(".thumb-item"),s=2,a=i.length,o=this.thumbsSwiper.params.slidesPerView;t.add(i).css({"--thumbSize":"","--thumbPad":"",width:"",height:""});let n=parseInt(i.css("--thumbPad"),10),r=e?t[0].offsetWidth:t[0].offsetHeight,h=e?i[0].offsetWidth:i[0].offsetHeight,l=Math.max(s,Math.round(r/(h+n)));a>=s&&(a===l+1||a===l-1)?l=a:o&&(o===l+1||o===l-1)&&(l=o),t.toggleClass("is-filled",a>=l),this.thumbsSwiper.params.slidesPerView=l,this.thumbsSwiper.params.spaceBetween=n,this.thumbsSwiper.update(),this.thumbsSwiper.slides.forEach(d=>{d.style.setProperty("--thumbSize",`${d.swiperSlideSize}px`)})}};flexbe_cli.entity.setClientJs("element","media01",{components:[E,H,ne]});function re(e,t,i=1){return 1-e>i&&(e=i),(1-Math.cos(Math.PI*e*t))/2}var Te=[0,"parallax","parallax-fade","zoom","zoom-return"],ze=class{imgParams={w:0,h:0,r:1,x:.5,y:.5};canvasSize={w:0,h:0,y:0};winSize={w:0,h:0};overlayOpacity=1;constructor(e,t,i="parallax",s=null){this.id=e,this.shouldRender=!1,this.mode=typeof i=="number"?Te[i]:i,this.fadeAnimation=this.mode.includes("fade"),this.parallaxFactor=this.mode.includes("fixed")?1:this.mode.includes("parallax")?.4:0,this.zoomFactor=this.mode.includes("zoom")?.2:0,this.zoomLimit=this.mode==="zoom"?.5:this.mode==="zoom-return"?1:0,this.offCanvas=document.createElement("canvas"),this.offCtx=this.offCanvas.getContext("2d",{alpha:!1}),this.component=t[0],this.canvas=this.component.querySelector("canvas"),this.overlay=this.component.querySelector(".overlay"),this.ctx=this.canvas.getContext("2d",{alpha:!1}),this.init(s),this.reflow()}init(e){!e||!e.url||(this.img=document.createElement("img"),this.img.onload=()=>{this.ready=!0,this.imgParams={w:this.img.width,h:this.img.height,r:this.img.height/this.img.width,x:+e.x.replace("%","")/100,y:+e.y.replace("%","")/100},this.dispatchEvents(),this.draw(),requestAnimationFrame(()=>{$(this.canvas).addClass("ready")})},this.img.src=e.url)}dispatchEvents(){flexbe_cli.events.off(`.bg_${this.id}`),$(window).off(`.bg_${this.id}`),$(window).on(`scroll.bg_${this.id}`,()=>{this.draw()}),$(window).on(`resize.bg_${this.id}`,()=>{this.reflow()}),flexbe_cli.is_admin&&(flexbe_cli.events.on(`entity_render:style.bg_${this.id}`,e=>{e.id===this.id&&this.reflow()}),flexbe_cli.events.on(`layout_change.bg_${this.id}`,()=>{this.reflow()}))}toggleRendering(e){this.shouldRender=e}getZoomCoords(e){let t=1;if(this.zoomFactor){let s=100-re(e*.01,2,this.zoomLimit)*100;t=1+this.zoomFactor/100*s}let i={w:0,h:0,x:0,y:0};return i.w=this.canvasSize.w*t,i.h=this.canvasSize.h*t,i.x=(i.w-this.canvas.width)/2,i.y=(i.h-this.canvasSize.h)/2,i}reflow(){let e=this.canvas.getBoundingClientRect();this.canvasSize={w:e.width,h:e.height,y:e.top+window.pageYOffset};let{viewportWidth:t,viewportHeight:i}=flexbe_cli.resize;this.winSize.h=flexbe_cli.run.is_mobile?Math.max(this.winSize.h,i):i,this.winSize.w=t,this.fadeAnimation&&(this.overlayOpacity=parseFloat(getComputedStyle(this.component).getPropertyValue("--componentBgOpacity")||1)),this.draw()}draw(){if(!this.shouldRender||!this.ready||this.pending)return;this.pending=!0;let e=flexbe_cli.scroll.latest+this.winSize.h-this.canvasSize.y,t=100-e/(this.canvasSize.h+this.winSize.h)*100;this.drawOffscreen(),this.drawCanvas(e,t),this.drawOverlay(t),this.pending=!1}drawOffscreen(){let{canvasSize:e,zoomFactor:t,winSize:i,parallaxFactor:s,imgParams:a,offCanvas:o,offCtx:n,img:r}=this,h=t?e.h:e.h+(i.h-e.h)*s,l=e.w,d=l,p=l*a.r,w=0,u=(p-h)*a.y*-1;h/l>a.r&&(d=h/a.r,p=h,w=(d-l)*a.x*-1,u=0),o.width!==l&&(o.width=l),o.height!==h&&(o.height=h),n.drawImage(r,w,u,d,p)}drawCanvas(e,t){if(this.canvas.width!==this.canvasSize.w&&(this.canvas.width=this.canvasSize.w),this.canvas.height!==this.canvasSize.h&&(this.canvas.height=this.canvasSize.h),this.zoomFactor){let i=this.getZoomCoords(t);try{this.ctx.drawImage(this.offCanvas,Math.ceil(i.x*-1),Math.ceil(e*this.parallaxFactor-this.winSize.h*this.parallaxFactor-i.y),i.w,i.h)}catch{}}else try{this.ctx.drawImage(this.offCanvas,0,Math.ceil((e-this.winSize.h)*this.parallaxFactor))}catch{}}drawOverlay(e){if(this.fadeAnimation&&this.overlay){let t=1-(1-this.overlayOpacity)*re(e*.01,2,1);this.overlay.style.setProperty("--componentBgOpacity",t)}}destroy(){this.destroyed=!0,cancelAnimationFrame(this._raf),flexbe_cli.events.off(`.bg_${this.id}`),$(window).off(`.bg_${this.id}`),$(this.canvas).removeClass("ready"),this.offCanvas?.remove(),this.img?.remove()}},Le=class{destroyed=!1;constructor(e,t,i){this.background=e,this.core=e.core,this.$component=e.$component,this.video=t,typeof i=="function"&&(this.onInited=i),this.initVideo()}initVideo(){this.$container=$('<div class="layer video-holder"></div>'),this.insertVideo(),this.video.type==="custom"?this.initMP4():this.video.type==="vimeo"?this.initVimeo():this.video.type==="youtube"?this.initYoutube():this.video.type==="kinescope"?this.initKinescope():this.initEmbed(),$(document).on(`visibilitychange.bg_effect_${this.core.id}`,()=>{this.background.onscreen&&!document.hidden&&setTimeout(()=>{this.play()},50)})}initVimeo(){let e=0,t=()=>{let i=this.vPlayer;return Promise.all([i.getVideoWidth(),i.getVideoHeight()]).then(s=>{let[a,o]=s;return a/o<2.5&&a/o>.4||e===3?{width:a,height:o}:(e+=1,t())})};flexbe_cli.require(["https://player.vimeo.com/api/player.js"],()=>{this.destroyed||(this.vPlayer=new window.Vimeo.Player(this.$videoElement[0]),t().then(i=>(this.video.width=i.width,this.video.height=i.height,this.fitToSize(),this.play(),null)).catch(()=>{}))})}initYoutube(){let e=()=>{this.yPlayer=new window.YT.Player(this.$videoElement[0],{events:{onReady:()=>{this.fitToSize(),this.play()}}})};!window.YT&&!window.onYouTubeIframeAPIReady?(window.onYouTubeIframeAPIReady=()=>{window.youtubeBGQueue.forEach(t=>t()),window.youtubeBGQueue=null,window.onYouTubeIframeAPIReady=null},window.youtubeBGQueue=[],window.youtubeBGQueue.push(e),flexbe_cli.require(["https://www.youtube.com/iframe_api"])):window.onYouTubeIframeAPIReady?window.youtubeBGQueue.push(e):e()}initKinescope(){this.fitToSize(),this.ready(),flexbe_cli.require(["https://player.kinescope.io/latest/iframe.player.js"],async()=>{this.destroyed||(this.kPlayer=await window.Kinescope.IframePlayer.create(this.$videoElement.attr("id"),{url:this.video.link,behavior:{background:!0,preload:"auto",loop:!0,muted:!0,autoPlay:"viewable",autoPause:!1}}),this.play())})}initEmbed(){this.fitToSize(),this.play()}initMP4(){this.$videoElement[0].oncanplay=()=>{this.play()},this.$videoElement[0].onloadeddata=()=>{this.video.width=this.$videoElement[0].videoWidth,this.video.height=this.$videoElement[0].videoHeight,this.fitToSize(),this.ready()}}insertVideo(){this.video.type==="custom"?(this.$videoElement=$(`<video src="${this.video.link}"
                       controlslist="nodownload"
                       loop="true"
                       muted="true"
                       autoplay="true"
                       playsinline="true"
                       disablePictureInPicture
                       disableRemotePlayback
                       pip="false"
                ></video>`),this.$videoElement[0].disablePictureInPicture=!0,this.$videoElement[0].disableRemotePlayback=!0):this.$videoElement=$(`<iframe 
                id="${crypto.randomUUID()}"
                src="${this.video.link}"
                width="${this.video.width}" 
                height="${this.video.height}" 
                allow="autoplay; encrypted-media; fullscreen; screen-wake-lock; accelerometer; clipboard-write;"
            ></iframe>`),this.$container.append(this.$videoElement),this.$component.prepend(this.$container),this.onInited&&this.onInited(this.$container)}fitToSize(){if(this.video){let e=this.$container.width(),t=this.$container.height(),i=this.video.width/this.video.height;i>e/t?this.$videoElement.css({width:`${t*i}px`,height:"100%"}):this.$videoElement.css({width:"100%",height:`${e/i}px`})}this.videoIsResized=!0}ready(){x(()=>this.videoIsResized,()=>{this.$component.addClass("video-loaded")},5e3)}play(){this.$videoElement&&this.$videoElement[0]&&this.$videoElement[0].play?(this.$videoElement[0].play(),$(document).one("touchstart.video-bg",()=>{this.$videoElement[0].play()}),this.ready()):this.video.type==="vimeo"?x(()=>this.vPlayer&&this.vPlayer.play,()=>{setTimeout(()=>{this.vPlayer.play(),this.ready()},50)},5e3):this.video.type==="youtube"?x(()=>this.yPlayer&&this.yPlayer.playVideo,()=>{this.yPlayer.playVideo(),this.ready()},5e3):this.video.type==="kinescope"?x(()=>this.kPlayer&&this.kPlayer.play,()=>{this.kPlayer.play(),this.ready()},5e3):this.ready()}pause(){this.video.type==="vimeo"&&this.vPlayer?this.vPlayer.pause():this.video.type==="youtube"&&this.yPlayer&&this.yPlayer.pauseVideo?this.yPlayer.pauseVideo():this.video.type==="kinescope"&&this.kPlayer?.pause?this.kPlayer.pause():this.$videoElement&&this.$videoElement[0]&&this.$videoElement[0].pause&&this.$videoElement[0].pause()}destroy(){this.destroyed=!0,this.pause(),this.kPlayer&&this.kPlayer.destroy(),$(document).off(`.bg_effect_${this.core.id}`)}},Ae=[800,1366,1920,2160],le=class extends m{static is="background";constructor(...e){super(...e);let{$component:t}=this,i=t.data();this.data={type:i.type||"color",hasImagePlaceholder:!!i.hasPlaceholder,imageLoadingOptions:flexbe_cli.vars.site.images,isLazyLoading:!!i.lazy,isImgLoaded:!!i.loaded,effect:i.effect,effectMobile:i.effectMobile??i.effect,videoId:i.videoId||null,videoType:i.videoType||null,videoLink:i.videoLink||null,videoWidth:i.videoWidth||640,videoHeight:i.videoHeight||360,videoPreview:i.videoPreview||"color",infinityVideo:i.infinityVideo??!1,mobileVideoEnabled:i.mobileVideoEnabled||!1,videoParallaxFactor:.4},this.image={url:null,id:i.imgId,ext:i.imgExt,x:i.imgX,y:i.imgY,proportion:i.imgProportion,width:i.imgWidth,animated:i.imgAnimated,transparent:i.imgTransparent,scale:"cover",type:"background",original:!!i.imgOriginal}}async onInit(){this.data.isLazyLoading||await this.loadImage(),this.$component.on("setImage",async()=>{this.isVisible&&!this.isImgLoading&&!this.data.isImgLoaded&&await this.loadImage()})}onScreen({state:e}){this.videoInstance&&(this.data.infinityVideo||(e?this.videoInstance.play():this.videoInstance.pause())),this.onscreen=e,!(!e||this.played)&&this.playVideo()}async onBeside({state:e,first:t}){e&&t&&(await this.loadImage(),this.imageEffectInit(),this.videoEffectInit()),this.played||this.playVideo(),this.bgEffect&&(this.bgEffect.toggleRendering(e),this.bgEffect.draw())}onResize(){this.bgEffect&&requestAnimationFrame(()=>{this.bgEffect.reflow()}),this.data.type==="video"&&(this.videoInstance?(this.videoInstance.fitToSize(),this.data.effect&&this.fixHolder&&this.setParallax&&setTimeout(()=>{this.fixHolder(),this.setParallax()},100),setTimeout(()=>{this.videoInstance.fitToSize()},150)):this.fixHolder&&this.fixHolder())}async loadImage(){if(!(this.image.id&&(this.data.type==="image"||this.data.type==="video"&&this.data.videoPreview==="image")))return;this.isImgLoading=!0;let e={width:this.componentWidth||this.component.offsetWidth,height:this.componentHeight||this.component.offsetHeight},{width:t}=this.image.original?{width:0}:await b(this.image,e,{...this.data.imageLoadingOptions,sizes:Ae});if(this.image.url=y(this.image,t,this.data.imageLoadingOptions),!this.data.isImgLoaded){if(this.data.hasImagePlaceholder)try{await P(this.image.url)}catch(i){console.error("Background preload error",i);return}this.setImage(this.image.url)}this.isImgLoading=!1}setImage(e){this.$component.find(".image-holder").css("background-image",`url(${e})`),this.$component.addClass("image-loaded"),this.isImgLoading=!1,this.data.isImgLoaded=!0}imageEffectInit(){if(this.data.type!=="image"||!this.data.effect||flexbe_cli.vars.globals.isScreenshot)return;let{owner:e,$component:t,data:i,image:s}=this,a=e._core?.id||e.getAttribute("data-id");typeof e._bgEffects=="object"&&e._bgEffects.destroy();let o=i.effect!=="fixed";o&&i.effectMobile==="off"&&flexbe_cli.run.is_screen_mobile&&(o=!1),o&&(this.bgEffect=new ze(a,t,i.effect,s),e._bgEffects=this.bgEffect)}videoEffectInit(){if(this.data.type!=="video"||this.data.effect!=="parallax"||flexbe_cli.vars.globals.isScreenshot)return;let e=this.$component.find(".video-holder, .image-holder"),t=this.owner._core,i=this.data,s=()=>t.tween.height+(flexbe_cli.resize.viewportHeight-t.tween.height)*i.videoParallaxFactor,a=()=>{e.css("height",`${s()}px`)},o=()=>{if(this.data.effectMobile==="off"&&flexbe_cli.run.is_screen_mobile){e.css("top","");return}let n=1-this.data.videoParallaxFactor,r=Math.floor((flexbe_cli.scroll.latest-t.tween.start)*-n)||0;e.css("top",`${r}px`)};a(),o(),t.$area.off(`fixHeaderHeight.component-bg-${t.id}`).on(`fixHeaderHeight.component-bg-${t.id}`,()=>{o()}),$(window).off(`scroll.component-bg-${t.id}`).on(`scroll.component-bg-${t.id}`,()=>{this.onscreen&&o()}),this.fixHolder=a,this.setParallax=o}playVideo(){if(flexbe_cli.run.is_screen_mobile&&!this.data.mobileVideoEnabled||flexbe_cli.vars.globals.isCriticalCss||flexbe_cli.vars.globals.isScreenshot||flexbe_cli.vars.globals.isBot)return!1;let e=this.data,t={id:e.videoId,type:e.videoType,link:e.videoLink,width:e.videoWidth,height:e.videoHeight};return this.data.type!=="video"||!t.id&&!t.link?!1:(this.played=!0,this.videoInstance||(this.videoInstance=new Le(this,t,()=>{this.videoEffectInit()})),!0)}onDestroy(){this.core.$area.off(`fixHeaderHeight.component-bg-${this.core.id}`),$(window).off(`scroll.component-bg-${this.core.id}`),this.bgEffect&&this.bgEffect.destroy(),this.videoInstance&&this.videoInstance.destroy()}};var de=class{inited=!1;interacted=!1;opts;$area;uidAttr;classContainer;activeUid;$activeTab;$activeSection;$mainContainer;$tabsContainer;$tabsList;$swiperHelper;$tabs;$sections;get isOnScreen(){if(!this.$tabsList)return!1;let{top:e,height:t}=this.$tabsList[0].getBoundingClientRect();return e>0&&e+t<flexbe_cli.resize.viewportHeight}constructor(e){if(this.opts=e,this.$area=e.$area,this.uidAttr=e.uidAttr||"data-tab-uid",this.classContainer=e.classContainer,this.initTabs(),e.activeUid)this.selectTab(e.activeUid);else if(window.location.hash){let t=window.location.hash.replace("#",""),i=$(`._anchor[name="${t}" i]`),s=i.length?i.closest("[data-id]"):$(`[data-id="${t}" i]`),a=i[0]||s[0];a&&this.selectTabFromTarget(a)}this.$area.on("bringIntoView",t=>this.selectTabFromTarget(t.target))}initTabs(){if(this.$mainContainer=this.classContainer==="self"?this.$area:this.$area.find(this.classContainer),this.$tabsContainer=this.$area.find(".container-tabs"),this.$tabsList=this.$area.find('[role="tablist"]'),this.$swiperHelper=this.$area.find(".tab-swiper-helper"),this.inited=!!this.$tabsList.length,!!this.inited&&(this.$tabs=this.$tabsList.find('[role="tab"]'),this.$sections=this.$mainContainer.find('[role="tabpanel"]'),flexbe_cli.is_admin&&this.normalizeLines(),setTimeout(()=>{this.$mainContainer.addClass("main-area--tabs-inited")},50),this.$tabsContainer.on("click",".tab",e=>{let t=$(e.currentTarget).closest(`[${this.uidAttr}]`).attr(`${this.uidAttr}`);t&&this.selectTab(t)}),this.$tabsList.on("wheel",e=>{let t=this.$tabsList[0],i=e.originalEvent.wheelDeltaX,s=e.originalEvent.wheelDeltaY;t.scrollWidth<=t.clientWidth||s<0&&t.scrollLeft===0||s>0&&t.scrollLeft===t.scrollWidth-t.clientWidth||flexbe_cli.run.is_pointer&&!i&&s&&(e.preventDefault(),t.scrollLeft+=s)}),this.$tabsList.on("touchstart",()=>{this.interacted=!0,this.destroySwipeAnimation()}),flexbe_cli.is_admin)){let e;this.$tabsContainer.on("mouseenter",".tab",t=>{t.buttons===1&&document.body.classList.contains("state--in-move")&&(clearTimeout(e),e=setTimeout(()=>{let i=$(t.target).closest(`[${this.uidAttr}]`).attr(`${this.uidAttr}`);this.selectTab(i)},700))}),this.$tabsContainer.on("mouseleave",".tab",()=>{clearTimeout(e)})}}swipeAnimationController(){if(!this.inited)return;let e=this.$tabsList[0]&&this.$tabsList[0].scrollWidth>this.$tabsList[0].clientWidth,t=this.isOnScreen;e&&t?this.initSwiperAnimation():t||this.destroySwipeAnimation()}initSwiperAnimation(){!this.$swiperHelper.hasClass("show")&&!this.interacted&&this.$swiperHelper.addClass("show")}destroySwipeAnimation(){this.$swiperHelper.hasClass("show")&&this.$swiperHelper.removeClass("show")}selectTabFromIndex(e){let t=this.$tabs.get(e);this.selectTabFromTarget(t)}selectTabFromTarget(e){let t=$(e).closest(`[${this.uidAttr}]`).attr(`${this.uidAttr}`);this.selectTab(t)}selectTab(e,{force:t}={}){if(!e||!t&&this.activeUid===e)return;this.inited||this.initTabs();let i=this.$tabs?.filter(`[${this.uidAttr}="${e}"]`)??[];if(!i.length)return;let s=this.$sections.filter(".active"),a=s[0]&&s[0].offsetTop,o=this.$sections.filter(`[${this.uidAttr}="${e}"]`);this.scrollToTab(i),this.$tabs.removeClass("active").attr("aria-selected",!1).attr("tabindex",-1),i.addClass("active").attr("aria-selected",!0).attr("tabindex",0),this.$sections.removeClass("active").prop("hidden",!0),o.addClass("active").prop("hidden",!1);let n=o[0]&&o[0].offsetTop;if(this.activeUid=e,this.$activeTab=i,this.$activeSection=o,s[0].dispatchEvent(new CustomEvent("element-become-hidden")),o[0].dispatchEvent(new CustomEvent("element-become-visible")),typeof this.opts.onSelectTab=="function"&&this.opts.onSelectTab({uid:e,$tab:i}),!flexbe_cli.run.is_mobile&&a!=null&&n!=null&&Math.abs(a-n)>0&&typeof anime<"u"){let r=this.$mainContainer,h=a-n;r.css("will-change","transform"),anime({targets:r[0],translateY:[h,0],duration:250,easing:"easeOutCubic",complete:()=>{r.css({transform:"","will-change":""})}})}}normalizeLines(){if(!this.inited)return;let e,t=this.$tabs;this.$tabsList.find(".tab-spacer").remove(),t.removeClass("first-in-line last-in-line"),t.first().addClass("first-in-line"),t.last().addClass("last-in-line"),t.each((i,s)=>{e&&e.offsetTop!==s.offsetTop&&($(s).addClass("first-in-line"),$(e).addClass("last-in-line"),$(e).after('<span class="tab-spacer"></span>')),e=s})}scrollToTab(e){if(!this.inited)return;let t=this.$tabsList,i=t[0].scrollWidth;if(i>t[0].offsetWidth){let s=e[0].offsetLeft,a=e[0].getBoundingClientRect(),o=flexbe_cli.resize.viewportWidth,n;a.width>o||a.left<20?n=s-20:a.right>o-20&&(n=s-(o-20-a.width)),n!=null&&(n=Math.max(0,Math.min(i-o,n)),t.animate({scrollLeft:n},{duration:250}))}}resetHash(){this.inited&&String(window.location.hash).replace(/^#{1,2}(tab)?/,"")===this.activeUid&&(flexbe_cli.lockPopstate=!0,window.history.replaceState(null,null,window.location.pathname),flexbe_cli.lockPopstate=!1)}};flexbe_cli.entity.setClientJs("block","BUNDLE",{components:[le],tabsController:void 0,shouldInitTabs:!0,onUpdate({templateRendered:e,reasonData:t}){e&&(this.shouldInitTabs=!0),["create","copy"].includes(t.source)&&requestAnimationFrame(()=>this.tabsController.selectTabFromIndex(t.to))},onResize(){this.tabsController&&this.tabsController.normalizeLines()},onBeside({state:e}){e&&this.shouldInitTabs&&this.createTabs()},onScreen({state:e}){this.tabsController&&(e||(this.tabsController.swipeAnimationController(),this.tabsController.resetHash()))},onFocus({state:e}){this.tabsController&&e&&this.tabsController.swipeAnimationController()},createTabs(){if(this.shouldInitTabs=!1,!this.$area.find('[role="tabpanel"]').length){this.tabsController=null;return}this.tabsController=new de({$area:this.$area,classContainer:".main-area",activeUid:this.selectedTabUid,onSelectTab:({uid:e})=>{this.selectedTabUid=e,this.updateTween()}})}});flexbe_cli.entity.setClientJs("element","avatar01",{components:[E,T],isPure:!0});var he=class extends V{static is="button"};flexbe_cli.entity.setClientJs("element","button01",{components:[he,T],isPure:!0});
